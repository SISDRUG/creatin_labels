(this["webpackJsonpreact-canvas-editor"]=this["webpackJsonpreact-canvas-editor"]||[]).push([[0],{102:function(t,e){},103:function(t,e){},104:function(t,e){},213:function(t,e,a){},216:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),i=a(32),r=a.n(i),o=a(11),s=a(19),l=a.n(s),u=a(91),d=a(34),h=a(12),v=a(13),g=a(15),b=a(14),f=a(4),j=a(89),p=a(58),O=a(92),m=a(7),x=a(6),y=["text"],k=function(t){Object(g.a)(a,t);var e=Object(b.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(v.a)(a,[{key:"initialize",value:function(t){var e=t.text,n=Object(O.a)(t,y);return Object(m.a)(Object(x.a)(a.prototype),"initialize",this).call(this,e,n),this}},{key:"toObject",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.a)(Object(x.a)(a.prototype),"toObject",this).call(this,t)}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.a)(Object(x.a)(a.prototype),"toObject",this).call(this,t)}}],[{key:"fromObject",value:function(t,e){return e&&e(new f.fabric.StaticText(t))}}]),a}(f.fabric.Textbox);k.type="StaticText",f.fabric.StaticText=f.fabric.util.createClass(k,{type:k.type}),f.fabric.StaticText.fromObject=k.fromObject;var S=function(t){Object(g.a)(a,t);var e=Object(b.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).src=void 0,t}return Object(v.a)(a,[{key:"initialize",value:function(t,e,n){this.set("src",n.src);var c=f.fabric.util.groupSVGElements(t,e);return Object(m.a)(Object(x.a)(a.prototype),"initialize",this).call(this,[c],n),this}},{key:"toObject",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.a)(Object(x.a)(a.prototype),"toObject",this).call(this,t,{src:this.src})}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.a)(Object(x.a)(a.prototype),"toObject",this).call(this,t,{src:this.src})}}]),a}(f.fabric.Group);S.type="StaticVector",f.fabric.Svg=f.fabric.util.createClass(S,{type:S.type});var A=function(t){Object(g.a)(a,t);var e=Object(b.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).subtype="image",t}return Object(v.a)(a,[{key:"initialize",value:function(t,e){return this.subtype=e.subtype,Object(m.a)(Object(x.a)(a.prototype),"initialize",this).call(this,t,e),this}},{key:"toObject",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.a)(Object(x.a)(a.prototype),"toObject",this).call(this,t,{subtype:this.subtype})}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.a)(Object(x.a)(a.prototype),"toObject",this).call(this,t,{subtype:this.subtype})}}],[{key:"fromObject",value:function(t,e){f.fabric.util.loadImage(t.src,(function(a){return e&&e(new f.fabric.StaticImage(a,t))}),null,{crossOrigin:"anonymous"})}}]),a}(f.fabric.Image);function w(t){return new Promise((function(e){var a=new Image;a.src=t,a.crossOrigin="Anonymous",a.onload=function(){e(a)}}))}A.type="StaticImage",f.fabric.StaticImage=f.fabric.util.createClass(A,{type:A.type}),f.fabric.StaticImage.fromObject=A.fromObject;a(213);var C=a(3);function I(t){return Object(C.jsxs)("nav",{class:"navbar",children:[Object(C.jsx)("a",{class:"active",href:"#",children:" React Canvas Editor"}),t.children]})}var z=a(90),T="SET_CANVAS",B=function(t){Object(g.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).onHandleKeyDown=function(t){46===t.which&&n.deleteActiveObject()},n.addText=function(){n.state.canvas.add(new f.fabric.IText("Tap and Type",{fontFamily:"arial",fill:n.state.color,fontSize:29,padding:5,left:0,right:0}))},n.addBackground=function(t){var e=n.state.canvas;n.removeBackground(),f.fabric.Image.fromURL(t,(function(t){e&&e.setBackgroundImage(t,(function(){e.renderAll()}),{scaleX:e.width/t.width,scaleY:e.height/t.height})}),{crossOrigin:"anonymous"}),n.setState({backgroundImage:t})},n.removeBackground=function(){var t=n.state.canvas;n.setState({backgroundImage:""}),t.backgroundImage&&(t.setBackgroundImage(null),t.renderAll()),console.log(t.getObjects())},n.onColorChange=function(t){var e=n.state.canvas;n.removeBackground(),e&&(e.backgroundColor=t.hex,e.renderAll())},n.textColorChange=function(t){var e=n.state.canvas;e.getActiveObject()&&(e.getActiveObject().set("fill",t.target.value),e.renderAll()),n.setState({color:t.target.value})},n.textBgColorChange=function(t){var e=n.state.canvas;e.getActiveObject()&&(e.getActiveObject().set("backgroundColor",t.target.value),e.renderAll())},n.onBold=function(t){var e=n.state.canvas;t.target.checked?e.getActiveObject()&&(e.getActiveObject().set("fontWeight","bold"),e.renderAll()):e.getActiveObject()&&(e.getActiveObject().set("fontWeight",""),e.renderAll())},n.onItalic=function(t){var e=n.state.canvas;t.target.checked?e.getActiveObject()&&(e.getActiveObject().set("fontStyle","italic"),e.renderAll()):e.getActiveObject()&&(e.getActiveObject().set("fontStyle",""),e.renderAll())},n.onUnderline=function(t){var e=n.state.canvas;t.target.checked?e.getActiveObject()&&(e.getActiveObject().set("underline",!0),e.renderAll()):e.getActiveObject()&&(e.getActiveObject().set("underline",!1),e.renderAll())},n.onLinethrough=function(t){var e=n.state.canvas;t.target.checked?e.getActiveObject()&&(e.getActiveObject().set("linethrough",!0),e.renderAll()):e.getActiveObject()&&(e.getActiveObject().set("linethrough",!1),e.renderAll())},n.onOverline=function(t){var e=n.state.canvas;t.target.checked?e.getActiveObject()&&(e.getActiveObject().set("overline",!0),e.renderAll()):e.getActiveObject()&&(e.getActiveObject().set("overline",!1),e.renderAll())},n.onFontSize=function(t){var e=n.state.canvas;e.getActiveObject()&&(e.getActiveObject().set("fontSize",t.target.value),e.renderAll()),n.setState({fontSize:t.target.value})},n.onImageChange=function(t){var e=n.state.canvas,a=URL.createObjectURL(t.target.files[0]);f.fabric.Image.fromURL(a,(function(t){e.add(t),e.renderAll()}),{scaleX:.15,scaleY:.15}),console.log(e.getObjects())},n.deleteActiveObject=function(){var t=n.state.canvas;t.getActiveObjects().forEach((function(e){t.remove(e)}))},n.download=function(t){var e=n.state.canvas.toDataURL({format:"png",quality:1});n.setState({href:e})},n.addTemplate=Object(d.a)(l.a.mark((function t(){var e,a,c,i,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=n.state.canvas).clear(),e&&(e.backgroundColor=p.background.value,e.renderAll()),a=Object(u.a)(p.objects),t.prev=4,a.s();case 6:if((c=a.n()).done){t.next=14;break}return i=c.value,t.next=10,n.importTemplate(i);case 10:(r=t.sent)?(e.add(r),e.renderAll()):console.log("UNABLE TO LOAD OBJECT: ",i.type);case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),a.e(t.t0);case 19:return t.prev=19,a.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[4,16,19,22]])}))),n.importTemplate=function(){var t=Object(d.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="StaticText"===t.t0?3:"StaticImage"===t.t0?7:11;break;case 3:return t.next=5,n.staticText(e);case 5:case 9:return a=t.sent,t.abrupt("break",11);case 7:return t.next=9,n.staticImage(e);case 11:return t.abrupt("return",a);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.staticText=function(t){return new Promise((function(e,a){try{var c=n.getBaseOptions(t,"text"),i=t.metadata,r=t.canvas.width,s=n.state.canvas.width,l=i.textAlign,u=i.fontFamily,d=i.fontSize,h=i.fontWeight,v=i.charSpacing,g=i.lineheight,b=i.text,j=i.padding,p=Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},c),{},{text:b||"Default Text"},l&&{textAlign:l}),u&&{fontFamily:u}),d&&{fontSize:d*s/r}),h&&{fontWeight:h}),v&&{charSpacing:v}),g&&{lineheight:g}),j&&{padding:j});e(new f.fabric.StaticText(p))}catch(O){a(O)}}))},n.staticImage=function(t){return new Promise(function(){var e=Object(d.a)(l.a.mark((function e(a,c){var i,r,o,s,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=n.getBaseOptions(t,"img"),r=t.metadata.src,e.next=5,w(r);case 5:o=e.sent,console.log(n.state.canvasScale),s=i.width,u=i.height,s&&u||(i.width=o.width,i.height=o.height),d=new f.fabric.StaticImage(o,i),a(d),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),c(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}())},n.zoomToPercent=function(t){var e=Number(t.target.value)/100;n.setCanvasSize(e)},n.zoomIn=function(){if(n.state.canvasScale<4){var t=n.state.canvasScale+.25;n.setCanvasSize(t)}},n.zoomOut=function(){if(n.state.canvasScale>.25){var t=n.state.canvasScale-.25;n.setCanvasSize(t)}},n.setCanvasSize=function(t){var e=n.state.canvas;e.setHeight(e.getHeight()*(t/n.state.canvasScale)),e.setWidth(e.getWidth()*(t/n.state.canvasScale));var a=e.getObjects();for(var c in a){var i=a[c].scaleX,r=a[c].scaleY,o=a[c].left,s=a[c].top,l=i*(t/n.state.canvasScale),u=r*(t/n.state.canvasScale),d=o*(t/n.state.canvasScale),h=s*(t/n.state.canvasScale);a[c].scaleX=l,a[c].scaleY=u,a[c].left=d,a[c].top=h,a[c].setCoords()}n.addBackground(n.state.backgroundImage),n.setState({canvasScale:t}),e.renderAll()},n.state={canvas:null,backgroundColor:"#FDEFEF",fontSize:"24",href:"",color:"#000000",canvasScale:1,backgroundImage:""},n.container=c.a.createRef(),n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var t=this.container.current,e=t.clientHeight,a=t.clientWidth,n=new f.fabric.Canvas("canvas",{backgroundColor:"#FDEFEF",height:e,width:a,preserveObjectStacking:!0});if(this.props.setCanvas({canvas:n}),this.setState({canvas:n}),window.canvasEditor){window.canvasEditor.setCanvas(n);var c=document.getElementById("canvas-editor-root");if(c&&c.getAttribute("data-background")){var i=c.getAttribute("data-background");i&&this.addBackground(i)}}document.addEventListener("keydown",this.onHandleKeyDown)}},{key:"getBaseOptions",value:function(t,e){var a=t.left,n=t.top,c=t.width,i=t.height,r=t.scaleX,o=t.scaleY,s=t.metadata?t.metadata:{},l=s.fill,u=s.angle,d=s.originX,h=s.originY,v=t.canvas.width,g=t.canvas.height,b=this.state.canvas.width,f=this.state.canvas.height;return{angle:u||0,top:n?n*b/v:0,left:a?a*b/v:0,width:"img"===e?c:c*b/v,height:"img"===e?i:i*f/g,originX:d||"left",originY:h||"top",scaleX:r*b/v||1,scaleY:o*b/v||1,fill:l||"#000000",metadata:s}}},{key:"render",value:function(){var t=this;console.log(this.props.editorState);for(var e=[],a=1;a<17;a++)e.push(Object(C.jsxs)("option",{value:25*a,children:[25*a,"%"]},a)),console.log(this.state.textBox);return Object(C.jsxs)("div",{id:"Canvas",children:[Object(C.jsx)(I,{children:Object(C.jsx)("a",{download:"image.png",className:"download",href:this.state.href,onClick:function(e){return t.download(e)},children:"Download"})}),Object(C.jsx)("button",{onClick:this.addText,children:"Add Text "}),Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{children:"Text color "}),Object(C.jsx)("input",{type:"color",value:this.state.color,size:"10",onChange:function(e){return t.textColorChange(e)}})," ",Object(C.jsx)("label",{children:"Background text color:"}),Object(C.jsx)("input",{type:"color",value:"",size:"10",onChange:function(e){return t.textBgColorChange(e)}}),Object(C.jsxs)("div",{children:[Object(C.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){t.onBold(e)}}),"Bold",Object(C.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){t.onItalic(e)}}),"Italic",Object(C.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){t.onUnderline(e)}}),"Underline",Object(C.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){t.onLinethrough(e)}}),"Linethrough",Object(C.jsx)("input",{type:"checkbox",name:"fonttype",onChange:function(e){t.onOverline(e)}}),"Overline"]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{children:"Font size"}),Object(C.jsx)("input",{type:"range",min:"1",max:"120",step:"1",value:this.state.fontSize,onChange:function(e){return t.onFontSize(e)}})]})]}),Object(C.jsxs)("button",{onClick:function(){return t.addBackground("https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__480.jpg")},children:["Add Background Image"," "]})," ",Object(C.jsx)("button",{onClick:this.removeBackground,children:"Remove Background "}),Object(C.jsx)("div",{children:Object(C.jsx)("button",{onClick:this.addTemplate,children:"Add Template"})}),Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{children:"Zoom "}),Object(C.jsx)("button",{onClick:this.zoomOut,children:"-"}),Object(C.jsxs)("select",{className:"zoom",onChange:this.zoomToPercent,value:100*this.state.canvasScale,children:[e,Object(C.jsx)("option",{value:"100",children:"FIT"}),Object(C.jsx)("option",{value:"200",children:"FILL"})]}),Object(C.jsx)("button",{onClick:this.zoomIn,children:"+"})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{for:"img",children:"Upload image"}),Object(C.jsx)("input",{type:"file",id:"img",name:"img",accept:"image/*",onChange:this.onImageChange})]}),Object(C.jsx)(j.a,{color:this.state.backgroundColor,onChange:this.onColorChange}),Object(C.jsx)("div",{children:Object(C.jsx)("canvas",{id:"canvas",style:{width:"100%",height:"100%",border:"2px solid black",margin:"auto"},ref:this.container})})]})}}]),a}(n.Component),E=Object(z.a)((function(t){return{editorState:t.editor}}),(function(t){return{setCanvas:function(e){return t(function(t){return{type:T,data:t}}(e))}}}))(B);a(55);function L(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(E,{})})}function F(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(L,{})})}window.canvasEditor={canvas:null,setCanvas:function(t){this.canvas=t},setBackgroundImage:function(t){var e=this;this.canvas&&f.fabric.Image.fromURL(t,(function(t){e.canvas&&e.canvas.setBackgroundImage(t,(function(){e.canvas.renderAll()}),{scaleX:e.canvas.width/t.width,scaleY:e.canvas.height/t.height})}),{crossOrigin:"anonymous"})},saveCanvas:function(){if(this.canvas){var t=this.canvas.toDataURL({format:"png",quality:1}),e=document.createElement("a");e.href=t,e.download="my-label.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}},r.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(F,{})}),document.getElementById("canvas-editor-root"))},55:function(t,e,a){},58:function(t){t.exports=JSON.parse('{"name":"Untitled design","objects":[{"left":508.9417413884061,"top":205.57577042950481,"width":91.85693359375,"height":32.77,"originX":"left","originY":"top","type":"StaticText","metadata":{"angle":90,"fill":"#000","fontSize":29,"template":"Simran","fontFamily":"arial","textAlign":"center","text":"Simran\\nType","padding":5},"canvas":{"width":1883,"height":942}},{"top":102.56448202959828,"left":719.471648118707,"width":2434,"height":1697,"originX":"left","originY":"top","scaleX":0.15,"scaleY":0.15,"type":"StaticImage","metadata":{"src":"https://upload.wikimedia.org/wikipedia/commons/4/41/Sunflower_from_Silesia2.jpg"},"canvas":{"width":1883,"height":942}}],"background":{"type":"color","value":"#c44569"},"frame":{"width":1280,"height":720},"preview":"https://d3q7mfli5umxdg.cloudfront.net/1632431060180_954892.png","id":"LOhgYV4WoviSEwwUGRmDd"}')}},[[216,1,2]]]);
//# sourceMappingURL=main.da60cbb0.chunk.js.map